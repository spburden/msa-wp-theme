function collectionFilter(){jQuery(".filter-style-select option:gt(0)").remove();var e=jQuery(".filter-collection-select").val();if("all"===e)Object.keys(options).forEach(function(e){options[e].forEach(function(e){jQuery(".filter-style-select").append('<option value="'+e+'">'+e+"</option>")})});else for(var o=options[e],a=0;a<o.length;a++)jQuery(".filter-style-select").append('<option value="'+o[a]+'">'+o[a]+"</option>");jQuery(".filter-style-select").trigger("chosen:updated")}function styleFilter(){var e=jQuery(".filter-style-select").val();if("all"!=e){for(var o in options){if(getKeyByValue(options[o],e)){var a=o;console.log(a);break}}jQuery(".filter-collection-select option[value="+a+"]").attr("selected","selected")}jQuery(".filter-collection-select").trigger("chosen:updated")}function getKeyByValue(e,o){return Object.keys(e)[Object.values(e).indexOf(o)]}jQuery(document).ready(function(e){kinesis.isInitialized||kinesis.initialize();var o=e(".gallery-image-container"),a=o.find(".gallery-image").length,l=1,t=a||20,r=9999,i=!a,n=function(o,a,l){var t=e("<a/>",{class:"gallery-image",href:"javascript:void(0);","data-full-img":a}),r=e("<img/>",{src:l,alt:o||"Image"});return Math.random()>.75&&t.addClass("double-sized"),t.append(r)},s=function(){l=1,r=9999},d={itemSelector:".gallery-image",columnWidth:200,isFitWidth:!0,gutter:20},c=!1,g=function(){if(!(l>r)){var a={page:l,per_page:t,exclude:351},s=e(".filter-collection-select").val(),g=e(".filter-style-select").val();"all"!=s.toLowerCase()&&(a.type_of_wheel=s),"all"!=g.toLowerCase()&&(a.wheel_style=g),e.ajax({url:"/wp-json/wp/v2/gallery",data:a}).done(function(a,t,s){if(o.find(".loader-center-middle").remove(),e("body").find(".gallery-load-more").length&&e("body").find(".gallery-load-more").removeClass("k-loading"),r=s.getResponseHeader("X-WP-TotalPages"),1==l&&!a.length)return void e("<div/>",{class:"text-center coming-soon-wrap"}).css({"margin-top":"20px"}).append(e("<span/>",{class:"alert alert-danger",text:"Images Coming Soon...",role:"alert"})).insertBefore(o);if(a.length){var g=kinesis.utils.getViewport().width;if(i)for(var p=0;p<a.length;p++){var f=a[p];if(f.acf){var m=f.title.rendered,y=f.acf.gallery_image,u=f.acf.gallery_image,v=n(m,y,u);o.append(v),c&&g>=480&&o.masonry("appended",v).imagesLoaded().progress(function(){o.masonry("layout")})}}else i=!0;!c&&g>=480&&(o.masonry(d),o.imagesLoaded().progress(function(){o.masonry("layout")}),c=!0)}if(1==l&&l<r&&($loadMoreWrap=e("<p/>",{class:"text-center load-more-wrap"}),$loadMoreBtn=e("<a/>",{href:"javascript:void(0);",text:"Load More",class:"gallery-load-more btn k-btn-transparent k-btn-extra-long text-uppercase k-btn-red"}),$loadMoreBtn.prepend(e("<img />",{class:"ajax-loading-icon",src:"/wp-content/themes/kinesismotorsport/icons/spinning-circles-red.svg"})),$loadMoreWrap.append($loadMoreBtn).insertAfter(o)),l>1&&l==r){var h=e("<span/>",{class:"alert alert-info",text:"No More Images",role:"alert"});e("body").find(".gallery-load-more").replaceWith(h),setTimeout(function(){e("body").find(".load-more-wrap").fadeOut(300,function(){e(this).remove()})},2e3)}l++})}};g(),e("body").on("click",".gallery-load-more",function(){e(this).addClass("k-loading"),g()}),e(".filter-block-wrap .filter-select").on("change",function(){var a=e(this);a.val();c&&o.empty().masonry("destroy"),o.append(e("<img />",{src:"/wp-content/themes/kinesismotorsport/icons/spinning-circles-red.svg",class:"loader-center-middle"})),c=!1,e("body").find(".load-more-wrap, .coming-soon-wrap").remove(),s(),g()}),setTimeout(function(){e(".filter-select").chosen({disable_search:!0})},600),e("body").on("click",".gallery-image",function(){var o=e(this),a=o.data("full-img"),l=e(".gallery-modal").find(".modal-body");l.find(".modal-gallery-image").remove(),e(".gallery-modal").modal("show"),l.prepend(e("<img/>",{class:"modal-gallery-image",src:a})),l.find(".modal-image-loader").show(),l.find(".modal-gallery-image").imagesLoaded().progress(function(){l.find(".modal-image-loader").hide()})}),e(window).on("resize orientationchange",function(){kinesis.utils.getViewport().width<480?c&&(o.masonry("destroy"),c=!1):c||(o.masonry(d),o.imagesLoaded().progress(function(){o.masonry("layout")}),c=!0)})});
